let pokemonRepository = (function () {
  let t = [],
    e = "https://pokeapi.co/api/v2/pokemon/?limit=150";
  function n(e) {
    t.push(e);
  }
  return {
    add: n,
    getAll: function () {
      return t;
    },
    addListItem: function (t) {
      let e = document.querySelector(".pokemon-list"),
        n = document.createElement("li"),
        o = document.createElement("button");
      (o.innerText = t.name),
        n.classList.add("list-group-item", "d-grid"),
        o.classList.add("btn", "btn-primary"),
        n.appendChild(o),
        e.appendChild(n),
        o.setAttribute("data-bs-toggle", "modal"),
        o.setAttribute("data-bs-target", "#Modal1"),
        o.addEventListener("click", function () {
          !(function (t) {
            (function (t) {
              let e = t.detailsUrl;
              return fetch(e)
                .then(function (t) {
                  return t.json();
                })
                .then(function (e) {
                  (t.imageUrl = e.sprites.front_default),
                    (t.height = e.height),
                    (t.weight = e.weight);
                });
            })(t).then(function () {
              let e = document.querySelector("#pokemon-name");
              e.innerText = t.name;
              let n = document.querySelector("#pokemon-img");
              (n.src = t.imageUrl),
                (n.alt = "A front image of the choosen pokemon");
              let o = document.querySelector("#pokemon-height");
              o.innerHTML = `Height: ${t.height}`;
            });
          })(t);
        });
    },
    loadList: function () {
      return fetch(e)
        .then(function (t) {
          return t.json();
        })
        .then(function (t) {
          t.results.forEach(function (t) {
            n({ name: t.name, detailsUrl: t.url });
          });
        })
        .catch(function (t) {
          console.error(t);
        });
    },
  };
})();
pokemonRepository.loadList().then(function () {
  pokemonRepository.getAll().forEach(function (t) {
    pokemonRepository.addListItem(t);
  });
});
